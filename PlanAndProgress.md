# Orbuculum of Legends

> 魔球奇谭

这是 MARYT 11th 整合包的发布标题。

## 背景故事

很久很久以前，一个不知名的小村庄，住着一位心灵手巧的工匠。

在冬季的某一天，这位工匠完成了他的新作品：一个精巧的水晶球。

球中布置着他的小屋和周边景物的微缩模型，和不会融化的雪；

只要轻轻转动，雪就会纷纷扬扬地落下，落在小屋的屋檐和小树的树梢上。

工匠高兴极了，赶紧烧旺壁炉的火、摆下一桌宴席，

邀请他的七位魔法师朋友，和他一起庆祝这件作品的完工。

第一位魔法师来了。他施展法术，祝福球中的世界气候温和，适宜万物生长；

第二位魔法师来了。他在球中的世界布置了生机勃勃的雨林；

第三位魔法师来了。他随手抓起地上的沙子，便化作了神秘的沙漠；

第四位魔法师喜爱广阔的大海，于是给球中的世界赠予了海洋；

第五位魔法师让牛羊动物遍布大地，水晶球中隐约可以听到咩咩哞哞的声音；

第六位魔法师构造了灼热的地心，赋予了世界运行的动力。

在欢乐的氛围当中，大家坐下来开怀畅饮，全然忘记了还有一位朋友姗姗来迟。

第七位魔法师到来之时，桌上已经剩下残羹冷炙，大家面面相觑，不知道该说些什么。

“好啊！你们吃饭不等我！”显然，他十分生气，

“我把你们全部封进这个球里，一辈子别想出去！”

...

工匠醒来了，在一个陌生的世界里。

他举目四望，意识到自己真的被装进了水晶球中，那个刚刚成形的世界。

“现在我该怎么办？”

“不管怎么样，我得想办法离开这里。”

从不知道什么地方，隐隐有声音传来：

“我们会一起帮助你出去。”

## 整合包设计思路

这个整合包分为八个阶段，前 7 个阶段对应背景故事中的一位魔法师，共有 7 个 BOSS 和 7 个维度；

第 8 阶段没有实际游戏内容，为 ENDGAME 阶段。

以 FTB 任务线贯穿整个流程，以 7 个 BOSS 生物的攻略为明线，食物的收集为暗线，双线开展。

玩家需要依次经过

1. 以种植原版作物为主的“主世界” - 阿波罗（Apollo）
2. 热带世界 - 鳕鱼（Codusk）
3. 以种植沙漠作物为主的沙漠世界 - 沙图恩（Saturn）
4. 以钓鱼和养鱼为主的海洋世界 - 尼奥尔德（Nyord）
5. 无法种植作物，只能狩猎与游牧的世界 - 腾格里（Tangri）
6. 地狱 - 祝融（Zhurong）
7. 末地 - 印和阗（Imhotep）

共七个维度，

加上 ENDGAME 阶段的主世界，共有 8 个维度，每个维度对应一个游戏阶段，每个阶段对应若干个食物模组。

每个阶段的末尾，玩家需要以该阶段的最高级食物为祭品，召唤该阶段的 BOSS 并将其击败，才能进入下一阶段，

进入下一阶段后，玩家不能再返回上一个阶段的世界。

玩家需要在阶段末尾制作末影箱，放入要带走的27组物品，加上背包的36格空间和1格副手，总共可以携带64组物品和4件盔甲。

进入下一阶段时，游戏会给玩家赠送一个新末影箱，玩家即可从中取出27组物品。

在进入狩猎与游牧世界之前，玩家不能制作德鲁伊mod的旅行包。在进入 ENDGAME 阶段之前，玩家无法制作潜影盒。

召唤第七阶段的 BOSS 并击败之，则玩家进入 ENDGAME 阶段的主世界维度，整合包通关，

此时玩家获得自由来往于各个阶段维度的能力，作为整合包最终通关奖励。

## 整合包特色机制

### BOSS 与“打 BOSS 模式”

在 BOSS 被召唤出来后、玩家死亡之前，玩家会处于打BOSS模式。

该模式下，玩家吃下食物将获得与食物本身的价值相对应的属性增益，包括伤害减免、伤害增加、生命回复等等。

此外，玩家如果在吃下指定种类的食物时注视 BOSS，可以对 BOSS 施加特定种类的影响。

但一旦玩家在该模式下死亡，BOSS将被游戏杀死且不掉落任何奖励，玩家也会退出打BOSS模式，之前获得的属性增益均归零。

打 BOSS 模式下的特性食物有且只有五个：

高饱和大回血（CD长）

低饱和小回血（主要血药）

低饱和小 Buff（主要 Buff 药）

高饱和大 Buff（CD长）

技能食物（Spellbind）

在打 BOSS 模式下受伤会随机扣减饱和度，以便缩短食物的冷却时间。

### 治疗机制

将游戏规则 `naturalRegeneration` 设为 `false`，玩家在整个游戏流程中，其饥饿度和饱和度都不能产生自然回血的效果。

玩家需要收集特定的道具来恢复体力，此外在打 BOSS 模式下一些食物也会产生恢复体力的效果。

________________

## 生存测试笔记

### 第一阶段

#### 可以获得的资源

##### 有用的资源

木头石头铁。

##### 没有用的资源

DruidCraft 的接骨木浆果只能吃、热带世界的 **椰子和菠萝** 甚至不能吃、

DruidCraft 的琥珀、岩化根、烈焰玻璃（只能当柴烧），VFP 的岩盐、碳酸钠，

简单的茶的小冰块、碧海新生的包埋鹦鹉螺的石头（只能烧成前期没啥用的鹦鹉螺）。

*W Collection 模组有一个生锈的铁，其特性有待观察。*

怪物掉落物方面主要为 Dannys Expansion 的怪物掉落物，

包括史莱姆掉落的蓝色粘液、食尸鬼掉落的内脏精华、灵魂铠甲掉落的盔甲碎片等。

~~*Danny Collection 模组有个自己的工作台，以及一系列自定义的武器装备，这些东西的特性有待观察。不排除这些看起来没有用的材料和看起来无法获得的武器装备是通过那个工作台的合成联系起来的。*~~ （该工作台已经确认需要删除。）

#### 野生农作物的生成

在 fake_overworld 中，已经确定 DruidCraft 的接骨木会自然生成，

但是数量太少，不太能满足要求；且即使玩家跳过接骨木的合成任务，直接获取接骨木及其产品，

对游戏进度的影响也不太大。

黑木完全不会生成。

~~农夫乐事的野生作物会否生成待定。若不生成，应设法取代之。~~ 农夫乐事的野生作物确定会生成。

SimplyTea 和 Tea Kettle 的茶树应当认为不会生成，需要添加合成。

*可以考虑将茶移动到二阶段。*

#### 主要的威胁

Dannys Expansion 的敌对生物

#### 考虑的调整方案

- [x] 禁止 Dannys Expansion 的生物在第一阶段的世界生成。（现已完全不会生成，无需再写 ZC 脚本。）
- [x] 增加琥珀与岩化根的实际用途。
- [x] ~~考察 Dannys Expansion 的工作台。~~ Dannys Expansion 的工作台的确可以合成一些东西，但是它包含一部分无用物品的合成且不能删除。仍需另外魔改这些物品的配方，同时删除工作台本身的合成。
- [ ] 将黑木移动到二阶段。
- [ ] 将接骨木移动到二阶段。

## 魔改规划

### 与阶段无关的规划内容

- [x] DruidCraft 镰刀的新功能：破坏草和作物时，将附近的草掉落物和作物掉落物 ~~拉到使用者身边~~ 吸入使用者的背包。
- [x] 马鞍和皮革马铠均可用皮革或布头、棕色地毯（可可豆），以及锁链合成。
- [x] 布头可以代替皮革合成皮革盔甲。尽管这样做可以让布头通过农夫乐事的砧板转化为皮革，但考虑到皮革的实际价值与布头差不多，这种转化可以允许。
- [x] 锁链可以与布头/皮革一起合成锁链甲。
- [x] 修改 DruidCraft 的生长灯配方。

### 第一阶段魔改规划

- [x] ~~删除主世界中原版红石、青金石、钻石的生成、DruidCraft 月光石、碧海新生包含鹦鹉螺的石头的生成，~~ 重新构造一个只生成煤、铁、~~金、~~（第一阶段用不到，故删除）琥珀、岩化根、烈焰玻璃、岩盐、碳酸钠的世界。目前的方案为，煤矿脉中，煤、烈焰玻璃、铁以7:2:1比例伴生；铁矿脉中，铁、煤以7:3比例伴生；化石矿脉中，岩化根、琥珀、骨块以3:3:1比例伴生。~~盐矿脉中，岩盐、碳酸钠以1:1比例伴生~~（**整个 VFP 中盐和干燥食物的内容移动到狩猎世界，与食物腐败机制关联**）
- [x] 检查 ~~农夫乐事的野菜、~~ （已确认会生成）~~简单茶树的茶树是否生成。~~ 不会生成。**将茶相关内容移动到二阶段**。
- [x] 允许玩家制作便携工作台。
- [x] 岩化根和琥珀可以制作和修复矿物探测器和金属探测器和群系指南针。
- [x] 探测器和群系指南针应有说明文字。
- [x] ~~给草方块和草添加掉落物“苔藓团”。~~ 已添加。该物品直接右键使用，0.1 概率恢复 4 心，0.3 概率恢复 2 心，期望为恢复 1 心。
- [x] ~~苔藓团可以与（某物品）合成“简易创可贴”，~~ 已添加。该物品直接右键使用，0.3 概率恢复 3 心，0.6 概率恢复 1 心，期望为恢复 1.5 心。
- [x] ~~确定上一条中的“某物品”~~ 确定为 DruidCraft 的线麻合成的物品“布头”。
- [x] 玩家可以用箱子和末影珍珠合成末影箱。
- [x] 末影箱被没有精准采集的工具破坏时，改为掉落箱子物品。

### 第一阶段 Boss

通过将祭品丢在三格内的地上，用信物召唤。召唤时消耗祭品和信物，将玩家提高到 160 格，并加缓降效果。

具体特性参阅下文 BOSS 设定表。

#### 打 BOSS 模式特性食物

- [x] 高饱和大回血（CD长）：肉汤 - 烹饪锅 原效果：立即回复 4 颗心，改为：立即回复 9 颗心
- [x] 低饱和小回血（主要血药）：混合沙拉 - 农夫乐事 原效果：立即回复 1 颗心，改为：增加 75 秒饥饿 V，立即回复 4 颗心，缓慢回复生命 20 秒钟
- [x] 低饱和小 Buff（主要 Buff 药）：卷心菜卷 - 农夫乐事 原本没有效果，改为：增加 45 秒饥饿 VI，45 秒跳跃提升 III，45 秒速度 I
- [x] 高饱和大 Buff（CD长）：莎莎酱 - 烹饪锅 保留急迫 6 分钟效果，10 秒力量 I，45 秒跳跃提升 VI，1 分钟速度 I，1 分钟夜视
- [x] 技能食物（Spellbind）：金胡萝卜 - 原版

### 第二阶段

- [ ] 黑木应在此阶段加入游戏。
- [ ] 接骨木应在此阶段加入游戏。
- [ ] 所有的茶树在此阶段加入游戏。
- [ ] 红石在此阶段加入游戏。
- [ ] 青金石和附魔台在此阶段加入游戏。
- [ ] 附魔台不用钻石和黑曜石合成，钻石用青金石代替，黑曜石需要另找方块代替。

### 第三阶段

- [ ] 金在此阶段加入游戏。
- [ ] 钻石在此阶段加入游戏。
- [ ] 月长石在此阶段加入游戏。

### 第四阶段

//TODO

### 第五阶段

- [x] 在进入此阶段之前盐和碳酸钠不能获得，因此将所有需要盐和碳酸钠合成的物品都加上 tooltip 以示提醒。
- [ ] 便携末影箱应在此阶段允许合成，并设置相应任务。
- [ ] DruidCraft 背包应在此阶段允许合成，并设置相应任务。

## 整合包相关的技术问题

1. ~~本整合包与 JustEnoughCharacters（通用拼音搜索）不兼容，原因不明。~~ 无法复现，该问题已排除。

## 附件：BOSS 设定表

### 一阶BOSS

原型：原版幻翼

属性：生命值 120，受到大于 10 点的伤害会被限制到 10，其余不变。

其体积会被放大为原来的 4 倍，而分身的体积为原来的 2 倍。

参考命令：

`/summon minecraft:phantom ~ ~10 ~ {"pehkui:scale_data_types":{"pehkui:width":{"initial":3.0,"scale":3.0,"target":3.0},"pehkui:height":{"initial":3.0,"scale":3.0,"target":3.0}}}`

技能：

1. 每次被玩家攻击时，有概率召唤 X 个血量较低的分身（X 介于 1-4，从 1-4 触发概率之比为4：3：2：1，分身的血量之和为 60），然后使自己隐身 (10X-5) 秒钟。
2. 每次攻击玩家时，有概率隐身 5 秒钟。
3. 玩家吃下 ~~某种指定食物~~ 已确定为金胡萝卜，可以使其发光 10 秒钟。
4. 本体和分身不会在阳光下起火。

名字：魅 (The Confuser)

称号：阴影中的封印守卫者 (Seal Guardian Hidden in Shadow)

台词：

出场：我是魅，阴影中的封印守卫者，守卫第一道封印。请在无尽的幻影之中找出我并击败我吧。

技能1：不要在没有光的地方寻找影子。/我是光的反面，与光相伴而生。

技能2：不要试图追逐我的踪迹。/你抓不住我的，但我可以抓住你。

技能3：你看到我了？/被识破了吗？

送别：你终于还是突破了第一道封印。不要太得意了，前面还有更强大的封印守卫者在等待你呢。
